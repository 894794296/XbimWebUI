export const worker = "!function(r,e){for(var t in e)r[t]=e[t]}(this,function(r){var e={};function t(I){if(e[I])return e[I].exports;var E=e[I]={i:I,l:!1,exports:{}};return r[I].call(E.exports,E,E.exports,t),E.l=!0,E.exports}return t.m=r,t.c=e,t.d=function(r,e,I){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:I})},t.r=function(r){Object.defineProperty(r,\"__esModule\",{value:!0})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,\"a\",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p=\"\",t(t.s=6)}([function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var I=function(){return function(){}}();e.Message=I,function(r){r[r.PROGRESS=0]=\"PROGRESS\",r[r.COMPLETED=1]=\"COMPLETED\",r[r.FAILED=2]=\"FAILED\"}(e.MessageType||(e.MessageType={}))},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var I=t(0),E=function(){function r(){this._buffer=null,this._view=null,this._position=0,this._progress=function(r){},this._lastProgress=0}return Object.defineProperty(r.prototype,\"Position\",{get:function(){return this._position},enumerable:!0,configurable:!0}),r.prototype.getSubReader=function(e){var t=new r,I=this._buffer.slice(this._position,this._position+e);return t.load(I,null,null),this._position+=e,t},r.prototype.load=function(r,e,t){this._position=0;var E=this;if(t=t||function(r){},this._progress=t,void 0===r||null==r)throw\"Source must be defined\";if(\"string\"==typeof r){var C=new XMLHttpRequest;C.open(\"GET\",r,!0),C.onreadystatechange=function(){if(4==C.readyState&&200==C.status){var r=new FileReader;r.onloadend=function(){r.result&&(E._buffer=r.result,E._view=new DataView(E._buffer),E.onloaded&&E.onloaded(E))},r.onprogress=function(r){t({message:\"Downloading geometry\",percent:Math.floor(r.loaded/r.total*100),type:I.MessageType.PROGRESS})},r.readAsArrayBuffer(C.response)}if(4==C.readyState&&200!=C.status){var e=\"Failed to fetch binary data from server. Server code: \"+C.status+\". This might be due to CORS policy of your browser if you run this as a local file.\";throw t({message:\"Downloading geometry\",percent:0,type:I.MessageType.FAILED}),E.onerror&&E.onerror(e),e}},C.responseType=\"blob\",null!=e&&Object.keys(e).forEach(function(r){var t=e[r];C.setRequestHeader(r,t)}),C.send()}else if(r instanceof Blob||r instanceof File){var n=new FileReader;n.onloadend=function(){n.result&&(E._buffer=n.result,E._view=new DataView(E._buffer),E.onloaded&&E.onloaded(E))},n.onprogress=function(r){t({message:\"Loading binary data\",percent:Math.floor(r.loaded/r.total*100),type:I.MessageType.PROGRESS})},n.readAsArrayBuffer(r)}else r instanceof ArrayBuffer&&(this._buffer=r,this._view=new DataView(E._buffer),E.onloaded&&E.onloaded(E))},r.prototype.seek=function(r){if(r<0||r>this._buffer.byteLength)throw\"Position out of range.\";this._position=r},r.prototype.isEOF=function(){if(null==this._position)throw\"Position is not defined\";return this._position==this._buffer.byteLength},r.prototype.readArray=function(r,e,t){null==e&&(e=1);var I=r*e,E=this._position;return this._position+=I,this.reportProgress(),1===e?new t(this._buffer.slice(E,E+I))[0]:new t(this._buffer.slice(E,E+I))},r.prototype.move=function(r){var e=this._position;return this._position+=r,this.reportProgress(),e},r.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:I.MessageType.PROGRESS,message:\"Processing data\",percent:Math.floor(100*this._position/this._buffer.byteLength)}))},r.prototype.readByte=function(){return this.readUint8()},r.prototype.readByteArray=function(r){return this.readUint8Array(r)},r.prototype.readUint8=function(){var r=this.move(1);return this._view.getUint8(r)},r.prototype.readUint8Array=function(r){return this.readArray(1,r,Uint8Array)},r.prototype.readInt16=function(){var r=this.move(2);return this._view.getInt16(r,!0)},r.prototype.readInt16Array=function(r){return this.readArray(2,r,Int16Array)},r.prototype.readUInt16=function(){var r=this.move(2);return this._view.getUint16(r,!0)},r.prototype.readUint16Array=function(r){return this.readArray(2,r,Uint16Array)},r.prototype.readInt32=function(){var r=this.move(4);return this._view.getInt32(r,!0)},r.prototype.readInt32Array=function(r){return this.readArray(4,r,Int32Array)},r.prototype.readUint32=function(){var r=this.move(4);return this._view.getUint32(r,!0)},r.prototype.readUint32Array=function(r){return this.readArray(4,r,Uint32Array)},r.prototype.readFloat32=function(){var r=this.move(4);return this._view.getFloat32(r,!0)},r.prototype.readFloat32Array=function(r){return this.readArray(4,r,Float32Array)},r.prototype.readFloat64=function(){var r=this.move(8);return this._view.getFloat64(r,!0)},r.prototype.readFloat64Array=function(r){return this.readArray(8,r,Float64Array)},r.prototype.readChar=function(r){null==r&&(r=1);var e=this.readByteArray(r),t=new Array(r);for(var I in e)t[I]=String.fromCharCode(e[I]);return 1===r?t[0]:t},r.prototype.readPoint=function(r){null==r&&(r=1);for(var e=this.readFloat32Array(3*r),t=new Array(r),I=0;I<r;I++){var E=3*I*4,C=new Float32Array(e.buffer,E,3);t[I]=C}return 1===r?t[0]:t},r.prototype.readRgba=function(r){null==r&&(r=1);for(var e=this.readByteArray(4*r),t=new Array(r),I=0;I<r;I++){var E=4*I,C=new Uint8Array(e.buffer,E,4);t[I]=C}return 1===r?t[0]:t},r.prototype.readPackedNormal=function(r){null==r&&(r=1);for(var e=this.readUint8Array(2*r),t=new Array(r),I=0;I<r;I++){var E=new Uint8Array(e.buffer,2*I,2);t[I]=E}return 1===r?t[0]:t},r.prototype.readMatrix4x4=function(r){null==r&&(r=1);for(var e=this.readFloat32Array(16*r),t=new Array(r),I=0;I<r;I++){var E=16*I*4,C=new Float32Array(e.buffer,E,16);t[I]=C}return 1===r?t[0]:t},r.prototype.readMatrix4x4_64=function(r){null==r&&(r=1);for(var e=this.readFloat64Array(16*r),t=new Array(r),I=0;I<r;I++){var E=16*I*8,C=new Float64Array(e.buffer,E,16);t[I]=C}return 1===r?t[0]:t},r.prototype.readData=function(r){var e=this.move(r);return this._buffer.slice(e,e+r)},r}();e.BinaryReader=E},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),function(r){r[r.IFCPRODUCT=20]=\"IFCPRODUCT\",r[r.IFCELEMENT=19]=\"IFCELEMENT\",r[r.IFCBUILDINGELEMENT=26]=\"IFCBUILDINGELEMENT\",r[r.IFCFOOTING=120]=\"IFCFOOTING\",r[r.IFCPILE=572]=\"IFCPILE\",r[r.IFCBEAM=171]=\"IFCBEAM\",r[r.IFCBEAMSTANDARDCASE=1104]=\"IFCBEAMSTANDARDCASE\",r[r.IFCBUILDINGELEMENTPROXY=560]=\"IFCBUILDINGELEMENTPROXY\",r[r.IFCCHIMNEY=1120]=\"IFCCHIMNEY\",r[r.IFCCOLUMN=383]=\"IFCCOLUMN\",r[r.IFCCOLUMNSTANDARDCASE=1126]=\"IFCCOLUMNSTANDARDCASE\",r[r.IFCCOVERING=382]=\"IFCCOVERING\",r[r.IFCCURTAINWALL=456]=\"IFCCURTAINWALL\",r[r.IFCDOOR=213]=\"IFCDOOR\",r[r.IFCDOORSTANDARDCASE=1151]=\"IFCDOORSTANDARDCASE\",r[r.IFCMEMBER=310]=\"IFCMEMBER\",r[r.IFCMEMBERSTANDARDCASE=1214]=\"IFCMEMBERSTANDARDCASE\",r[r.IFCPLATE=351]=\"IFCPLATE\",r[r.IFCPLATESTANDARDCASE=1224]=\"IFCPLATESTANDARDCASE\",r[r.IFCRAILING=350]=\"IFCRAILING\",r[r.IFCRAMP=414]=\"IFCRAMP\",r[r.IFCRAMPFLIGHT=348]=\"IFCRAMPFLIGHT\",r[r.IFCROOF=347]=\"IFCROOF\",r[r.IFCSHADINGDEVICE=1265]=\"IFCSHADINGDEVICE\",r[r.IFCSLAB=99]=\"IFCSLAB\",r[r.IFCSLABELEMENTEDCASE=1268]=\"IFCSLABELEMENTEDCASE\",r[r.IFCSLABSTANDARDCASE=1269]=\"IFCSLABSTANDARDCASE\",r[r.IFCSTAIR=346]=\"IFCSTAIR\",r[r.IFCSTAIRFLIGHT=25]=\"IFCSTAIRFLIGHT\",r[r.IFCWALL=452]=\"IFCWALL\",r[r.IFCWALLELEMENTEDCASE=1314]=\"IFCWALLELEMENTEDCASE\",r[r.IFCWALLSTANDARDCASE=453]=\"IFCWALLSTANDARDCASE\",r[r.IFCWINDOW=667]=\"IFCWINDOW\",r[r.IFCWINDOWSTANDARDCASE=1316]=\"IFCWINDOWSTANDARDCASE\",r[r.IFCELEMENTCOMPONENT=424]=\"IFCELEMENTCOMPONENT\",r[r.IFCREINFORCINGELEMENT=262]=\"IFCREINFORCINGELEMENT\",r[r.IFCREINFORCINGBAR=571]=\"IFCREINFORCINGBAR\",r[r.IFCREINFORCINGMESH=531]=\"IFCREINFORCINGMESH\",r[r.IFCTENDON=261]=\"IFCTENDON\",r[r.IFCTENDONANCHOR=675]=\"IFCTENDONANCHOR\",r[r.IFCBUILDINGELEMENTPART=220]=\"IFCBUILDINGELEMENTPART\",r[r.IFCDISCRETEACCESSORY=423]=\"IFCDISCRETEACCESSORY\",r[r.IFCFASTENER=535]=\"IFCFASTENER\",r[r.IFCMECHANICALFASTENER=536]=\"IFCMECHANICALFASTENER\",r[r.IFCVIBRATIONISOLATOR=1312]=\"IFCVIBRATIONISOLATOR\",r[r.IFCFEATUREELEMENT=386]=\"IFCFEATUREELEMENT\",r[r.IFCSURFACEFEATURE=1287]=\"IFCSURFACEFEATURE\",r[r.IFCFEATUREELEMENTSUBTRACTION=499]=\"IFCFEATUREELEMENTSUBTRACTION\",r[r.IFCVOIDINGFEATURE=1313]=\"IFCVOIDINGFEATURE\",r[r.IFCOPENINGELEMENT=498]=\"IFCOPENINGELEMENT\",r[r.IFCOPENINGSTANDARDCASE=1217]=\"IFCOPENINGSTANDARDCASE\",r[r.IFCFEATUREELEMENTADDITION=385]=\"IFCFEATUREELEMENTADDITION\",r[r.IFCPROJECTIONELEMENT=384]=\"IFCPROJECTIONELEMENT\",r[r.IFCFURNISHINGELEMENT=253]=\"IFCFURNISHINGELEMENT\",r[r.IFCFURNITURE=1184]=\"IFCFURNITURE\",r[r.IFCSYSTEMFURNITUREELEMENT=1291]=\"IFCSYSTEMFURNITUREELEMENT\",r[r.IFCDISTRIBUTIONELEMENT=44]=\"IFCDISTRIBUTIONELEMENT\",r[r.IFCDISTRIBUTIONFLOWELEMENT=45]=\"IFCDISTRIBUTIONFLOWELEMENT\",r[r.IFCDISTRIBUTIONCHAMBERELEMENT=180]=\"IFCDISTRIBUTIONCHAMBERELEMENT\",r[r.IFCENERGYCONVERSIONDEVICE=175]=\"IFCENERGYCONVERSIONDEVICE\",r[r.IFCAIRTOAIRHEATRECOVERY=1097]=\"IFCAIRTOAIRHEATRECOVERY\",r[r.IFCBOILER=1105]=\"IFCBOILER\",r[r.IFCBURNER=1109]=\"IFCBURNER\",r[r.IFCCHILLER=1119]=\"IFCCHILLER\",r[r.IFCCOIL=1124]=\"IFCCOIL\",r[r.IFCCONDENSER=1132]=\"IFCCONDENSER\",r[r.IFCCOOLEDBEAM=1141]=\"IFCCOOLEDBEAM\",r[r.IFCCOOLINGTOWER=1142]=\"IFCCOOLINGTOWER\",r[r.IFCENGINE=1164]=\"IFCENGINE\",r[r.IFCEVAPORATIVECOOLER=1166]=\"IFCEVAPORATIVECOOLER\",r[r.IFCEVAPORATOR=1167]=\"IFCEVAPORATOR\",r[r.IFCHEATEXCHANGER=1187]=\"IFCHEATEXCHANGER\",r[r.IFCHUMIDIFIER=1188]=\"IFCHUMIDIFIER\",r[r.IFCTUBEBUNDLE=1305]=\"IFCTUBEBUNDLE\",r[r.IFCUNITARYEQUIPMENT=1310]=\"IFCUNITARYEQUIPMENT\",r[r.IFCELECTRICGENERATOR=1160]=\"IFCELECTRICGENERATOR\",r[r.IFCELECTRICMOTOR=1161]=\"IFCELECTRICMOTOR\",r[r.IFCMOTORCONNECTION=1216]=\"IFCMOTORCONNECTION\",r[r.IFCSOLARDEVICE=1270]=\"IFCSOLARDEVICE\",r[r.IFCTRANSFORMER=1303]=\"IFCTRANSFORMER\",r[r.IFCFLOWCONTROLLER=121]=\"IFCFLOWCONTROLLER\",r[r.IFCAIRTERMINALBOX=1096]=\"IFCAIRTERMINALBOX\",r[r.IFCDAMPER=1148]=\"IFCDAMPER\",r[r.IFCFLOWMETER=1182]=\"IFCFLOWMETER\",r[r.IFCVALVE=1311]=\"IFCVALVE\",r[r.IFCELECTRICDISTRIBUTIONBOARD=1157]=\"IFCELECTRICDISTRIBUTIONBOARD\",r[r.IFCELECTRICTIMECONTROL=1162]=\"IFCELECTRICTIMECONTROL\",r[r.IFCPROTECTIVEDEVICE=1235]=\"IFCPROTECTIVEDEVICE\",r[r.IFCSWITCHINGDEVICE=1290]=\"IFCSWITCHINGDEVICE\",r[r.IFCFLOWFITTING=467]=\"IFCFLOWFITTING\",r[r.IFCDUCTFITTING=1153]=\"IFCDUCTFITTING\",r[r.IFCPIPEFITTING=1222]=\"IFCPIPEFITTING\",r[r.IFCCABLECARRIERFITTING=1111]=\"IFCCABLECARRIERFITTING\",r[r.IFCCABLEFITTING=1113]=\"IFCCABLEFITTING\",r[r.IFCJUNCTIONBOX=1195]=\"IFCJUNCTIONBOX\",r[r.IFCFLOWMOVINGDEVICE=502]=\"IFCFLOWMOVINGDEVICE\",r[r.IFCCOMPRESSOR=1131]=\"IFCCOMPRESSOR\",r[r.IFCFAN=1177]=\"IFCFAN\",r[r.IFCPUMP=1238]=\"IFCPUMP\",r[r.IFCFLOWSEGMENT=574]=\"IFCFLOWSEGMENT\",r[r.IFCDUCTSEGMENT=1154]=\"IFCDUCTSEGMENT\",r[r.IFCPIPESEGMENT=1223]=\"IFCPIPESEGMENT\",r[r.IFCCABLECARRIERSEGMENT=1112]=\"IFCCABLECARRIERSEGMENT\",r[r.IFCCABLESEGMENT=1115]=\"IFCCABLESEGMENT\",r[r.IFCFLOWSTORAGEDEVICE=371]=\"IFCFLOWSTORAGEDEVICE\",r[r.IFCTANK=1293]=\"IFCTANK\",r[r.IFCELECTRICFLOWSTORAGEDEVICE=1159]=\"IFCELECTRICFLOWSTORAGEDEVICE\",r[r.IFCFLOWTERMINAL=46]=\"IFCFLOWTERMINAL\",r[r.IFCFIRESUPPRESSIONTERMINAL=1179]=\"IFCFIRESUPPRESSIONTERMINAL\",r[r.IFCSANITARYTERMINAL=1262]=\"IFCSANITARYTERMINAL\",r[r.IFCSTACKTERMINAL=1277]=\"IFCSTACKTERMINAL\",r[r.IFCWASTETERMINAL=1315]=\"IFCWASTETERMINAL\",r[r.IFCAIRTERMINAL=1095]=\"IFCAIRTERMINAL\",r[r.IFCMEDICALDEVICE=1212]=\"IFCMEDICALDEVICE\",r[r.IFCSPACEHEATER=1272]=\"IFCSPACEHEATER\",r[r.IFCAUDIOVISUALAPPLIANCE=1099]=\"IFCAUDIOVISUALAPPLIANCE\",r[r.IFCCOMMUNICATIONSAPPLIANCE=1127]=\"IFCCOMMUNICATIONSAPPLIANCE\",r[r.IFCELECTRICAPPLIANCE=1156]=\"IFCELECTRICAPPLIANCE\",r[r.IFCLAMP=1198]=\"IFCLAMP\",r[r.IFCLIGHTFIXTURE=1199]=\"IFCLIGHTFIXTURE\",r[r.IFCOUTLET=1219]=\"IFCOUTLET\",r[r.IFCFLOWTREATMENTDEVICE=425]=\"IFCFLOWTREATMENTDEVICE\",r[r.IFCINTERCEPTOR=1193]=\"IFCINTERCEPTOR\",r[r.IFCDUCTSILENCER=1155]=\"IFCDUCTSILENCER\",r[r.IFCFILTER=1178]=\"IFCFILTER\",r[r.IFCDISTRIBUTIONCONTROLELEMENT=468]=\"IFCDISTRIBUTIONCONTROLELEMENT\",r[r.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]=\"IFCPROTECTIVEDEVICETRIPPINGUNIT\",r[r.IFCACTUATOR=1091]=\"IFCACTUATOR\",r[r.IFCALARM=1098]=\"IFCALARM\",r[r.IFCCONTROLLER=1139]=\"IFCCONTROLLER\",r[r.IFCFLOWINSTRUMENT=1181]=\"IFCFLOWINSTRUMENT\",r[r.IFCSENSOR=1264]=\"IFCSENSOR\",r[r.IFCUNITARYCONTROLELEMENT=1308]=\"IFCUNITARYCONTROLELEMENT\",r[r.IFCCIVILELEMENT=1122]=\"IFCCIVILELEMENT\",r[r.IFCELEMENTASSEMBLY=18]=\"IFCELEMENTASSEMBLY\",r[r.IFCGEOGRAPHICELEMENT=1185]=\"IFCGEOGRAPHICELEMENT\",r[r.IFCTRANSPORTELEMENT=416]=\"IFCTRANSPORTELEMENT\",r[r.IFCVIRTUALELEMENT=168]=\"IFCVIRTUALELEMENT\",r[r.IFCSTRUCTURALACTIVITY=41]=\"IFCSTRUCTURALACTIVITY\",r[r.IFCSTRUCTURALACTION=40]=\"IFCSTRUCTURALACTION\",r[r.IFCSTRUCTURALCURVEACTION=1279]=\"IFCSTRUCTURALCURVEACTION\",r[r.IFCSTRUCTURALLINEARACTION=463]=\"IFCSTRUCTURALLINEARACTION\",r[r.IFCSTRUCTURALSURFACEACTION=1284]=\"IFCSTRUCTURALSURFACEACTION\",r[r.IFCSTRUCTURALPLANARACTION=39]=\"IFCSTRUCTURALPLANARACTION\",r[r.IFCSTRUCTURALPOINTACTION=356]=\"IFCSTRUCTURALPOINTACTION\",r[r.IFCSTRUCTURALREACTION=355]=\"IFCSTRUCTURALREACTION\",r[r.IFCSTRUCTURALCURVEREACTION=1280]=\"IFCSTRUCTURALCURVEREACTION\",r[r.IFCSTRUCTURALPOINTREACTION=354]=\"IFCSTRUCTURALPOINTREACTION\",r[r.IFCSTRUCTURALSURFACEREACTION=1285]=\"IFCSTRUCTURALSURFACEREACTION\",r[r.IFCSTRUCTURALITEM=226]=\"IFCSTRUCTURALITEM\",r[r.IFCSTRUCTURALCONNECTION=265]=\"IFCSTRUCTURALCONNECTION\",r[r.IFCSTRUCTURALCURVECONNECTION=534]=\"IFCSTRUCTURALCURVECONNECTION\",r[r.IFCSTRUCTURALPOINTCONNECTION=533]=\"IFCSTRUCTURALPOINTCONNECTION\",r[r.IFCSTRUCTURALSURFACECONNECTION=264]=\"IFCSTRUCTURALSURFACECONNECTION\",r[r.IFCSTRUCTURALMEMBER=225]=\"IFCSTRUCTURALMEMBER\",r[r.IFCSTRUCTURALCURVEMEMBER=224]=\"IFCSTRUCTURALCURVEMEMBER\",r[r.IFCSTRUCTURALCURVEMEMBERVARYING=227]=\"IFCSTRUCTURALCURVEMEMBERVARYING\",r[r.IFCSTRUCTURALSURFACEMEMBER=420]=\"IFCSTRUCTURALSURFACEMEMBER\",r[r.IFCSTRUCTURALSURFACEMEMBERVARYING=421]=\"IFCSTRUCTURALSURFACEMEMBERVARYING\",r[r.IFCPORT=179]=\"IFCPORT\",r[r.IFCDISTRIBUTIONPORT=178]=\"IFCDISTRIBUTIONPORT\",r[r.IFCANNOTATION=634]=\"IFCANNOTATION\",r[r.IFCSPATIALELEMENT=1273]=\"IFCSPATIALELEMENT\",r[r.IFCSPATIALSTRUCTUREELEMENT=170]=\"IFCSPATIALSTRUCTUREELEMENT\",r[r.IFCBUILDING=169]=\"IFCBUILDING\",r[r.IFCBUILDINGSTOREY=459]=\"IFCBUILDINGSTOREY\",r[r.IFCSITE=349]=\"IFCSITE\",r[r.IFCSPACE=454]=\"IFCSPACE\",r[r.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]=\"IFCEXTERNALSPATIALSTRUCTUREELEMENT\",r[r.IFCEXTERNALSPATIALELEMENT=1174]=\"IFCEXTERNALSPATIALELEMENT\",r[r.IFCSPATIALZONE=1275]=\"IFCSPATIALZONE\",r[r.IFCGRID=564]=\"IFCGRID\",r[r.IFCPROXY=447]=\"IFCPROXY\"}(e.ProductType||(e.ProductType={}))},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),function(r){r[r.UNDEFINED=255]=\"UNDEFINED\",r[r.HIDDEN=254]=\"HIDDEN\",r[r.HIGHLIGHTED=253]=\"HIGHLIGHTED\",r[r.XRAYVISIBLE=252]=\"XRAYVISIBLE\",r[r.PICKING_ONLY=251]=\"PICKING_ONLY\",r[r.UNSTYLED=225]=\"UNSTYLED\"}(e.State||(e.State={}))},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var I=t(1),E=function(){function r(){this.load=function(r){var e=new I.BinaryReader,t=this;e.onloaded=function(){t.parse(e),t.onloaded&&t.onloaded(this)},e.load(r,null,null)}}return r.prototype.parse=function(r){r.readByte();var e=r.readInt32(),t=r.readInt32();this.vertices=r.readFloat32Array(3*e),this.indices=new Uint32Array(3*t),this.normals=new Uint8Array(6*t);var I,E=0;I=e<=255?function(e){return r.readByteArray(e)}:e<=65535?function(e){return r.readUint16Array(e)}:function(e){return r.readInt32Array(e)};var C=r.readInt32();if(0!==e&&0!==t)for(var n=0;n<C;n++){var a=r.readInt32();if(0!=a){var o=a>0;if(a=Math.abs(a),o){var i=r.readByteArray(2),s=I(3*a);this.indices.set(s,E);for(var T=0;T<3*a;T++)this.normals[2*E]=i[0],this.normals[2*E+1]=i[1],E++}else for(T=0;T<a;T++)this.indices[E]=I(),this.normals.set(r.readByteArray(2),2*E),E++,this.indices[E]=I(),this.normals.set(r.readByteArray(2),2*E),E++,this.indices[E]=I(),this.normals.set(r.readByteArray(2),2*E),E++}}},r}();e.TriangulatedShape=E},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var I=t(1),E=t(4),C=t(3),n=t(2),a=t(0),o=function(){function r(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this._styleMap=new T}return r.prototype.parse=function(r){if(r&&!r.isEOF()){this._reader=r;var e=r;if(94132117!=e.readInt32())throw new Error(\"Magic number mismatch.\");var t=e.readByte();if(t>this._maxVersionSupported)throw new Error(\"Viewer doesn't support version \"+t+\" of the wexBIM stream\");var I=e.readInt32(),C=e.readInt32(),n=e.readInt32(),o=e.readInt32(),i=e.readInt32(),T=e.readInt32();this.meter=e.readFloat32(),t>3&&(this.wcs=[e.readFloat64(),e.readFloat64(),e.readFloat64()]);var F=e.readInt16();this.vertices=new Float32Array(this.square(4,3*C)),this.normals=new Uint8Array(6*n),this.indices=new Float32Array(3*n),this.styleIndices=new Uint16Array(3*n),this.styles=new Uint8Array(this.square(1,4*(T+1))),this.products=new Float32Array(3*n),this.states=new Uint8Array(3*n*2),this.transformations=new Float32Array(3*n),this.matrices=new Float32Array(this.square(4,16*o)),this.productMaps={},this.regions=new Array(F),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*n,this._iTransform=0,this._iMatrix=0;for(var A=0;A<F;A++){(U=new s).population=e.readInt32(),U.centre=e.readFloat32Array(3),U.bbox=e.readFloat32Array(6),this.regions[A]=U}for(var R=0;R<T;R++){var N=e.readInt32(),L=255*e.readFloat32(),O=255*e.readFloat32(),u=255*e.readFloat32(),d=255*e.readFloat32();this.styles.set([L,O,u,d],4*R),this._styleMap.Add({id:N,index:R,transparent:d<254})}this.styles.set([255,255,255,255],4*R);var p={id:-1,index:R,transparent:!1};this._styleMap.Add(p);for(A=0;A<i;A++){var S=e.readInt32(),l={productID:S,renderId:A+1,type:e.readInt16(),bBox:e.readFloat32Array(6),spans:[]};this.productMaps[S]=l,this.productIdLookup[A+1]=S}if(t>=3)for(var f=0;f<F;f++)for(var U=this.regions[f],h=e.readInt32(),M=0;M<h;M++){var y=this.readShape(t),c=e.readInt32();if(0!==c){var D=e.getSubReader(c);if((b=new E.TriangulatedShape).parse(D),!D.isEOF())throw new Error(\"Incomplete reading of geometry for shape instance \"+y[0].iLabel);this.feedDataArrays(y,b)}}else for(var P=0;P<I;P++){var b,v=this.readShape(t);(b=new E.TriangulatedShape).parse(e),this.feedDataArrays(v,b)}if(!e.isEOF())throw this.progress({type:a.MessageType.FAILED,message:\"Processing data\",percent:0}),new Error(\"Binary reader is not at the end of the file.\");this.progress({type:a.MessageType.PROGRESS,message:\"Processing data\",percent:100}),this.transparentIndex=this._iIndexForward}},r.prototype.square=function(r,e){if(void 0===r||void 0===e)throw new Error('Wrong arguments for \"square\" function.');if(0==e)return 0;for(var t=e*r,I=Math.ceil(Math.sqrt(t/4));4*I%r!=0;)I++;return I*I*4/r},r.prototype.feedDataArrays=function(r,e){var t=this;r.forEach(function(r){var I=0,E=I=r.transparent?t._iIndexBackward-e.indices.length:t._iIndexForward,a=t.productMaps[r.pLabel];void 0===a&&(a={productID:0,renderId:0,type:n.ProductType.IFCOPENINGELEMENT,bBox:new Float32Array(6),spans:[]},t.productMaps[r.pLabel]=a),t.normals.set(e.normals,2*I);for(var o=a.type==n.ProductType.IFCSPACE||a.type==n.ProductType.IFCOPENINGELEMENT?C.State.HIDDEN:255,i=0;i<e.indices.length;i++)t.indices[I]=e.indices[i]+t._iVertex/3,t.products[I]=a.renderId,t.styleIndices[I]=r.style,t.transformations[I]=r.transform,t.states[2*I]=o,t.states[2*I+1]=255,I++;var s=I;a.spans.push(new Int32Array([E,s])),r.transparent?t._iIndexBackward-=e.indices.length:t._iIndexForward+=e.indices.length},this),this.vertices.set(e.vertices,this._iVertex),this._iVertex+=e.vertices.length},r.prototype.readShape=function(r){for(var e=this._reader,t=e.readInt32(),I=new Array,E=0;E<t;E++){var C=e.readInt32(),n=(e.readInt16(),e.readInt32()),a=e.readInt32(),o=null;t>1&&(o=1===r?e.readFloat32Array(16):e.readFloat64Array(16),this.matrices.set(o,this._iMatrix),this._iMatrix+=16);var i=this._styleMap.GetStyle(a);null===i&&(i=this._styleMap.GetStyle(-1)),I.push({pLabel:C,iLabel:n,style:i.index,transparent:i.transparent,transform:null!=o?this._iTransform++:-1})}return I},r.prototype.load=function(r,e,t){var E=this;this.progress=t||function(r){};var C=new I.BinaryReader,n=this;C.onloaded=function(){n.parse(C),n.onloaded&&n.onloaded(E)},C.onerror=function(r){n.onerror&&n.onerror(r)},C.load(r,e,t)},r}();e.ModelGeometry=o;var i=function(){function r(){}return r.clone=function(e){var t=new r;return t.productID=e.productID,t.renderId,e.renderId,t.type=e.type,t.bBox=new Float32Array(e.bBox),t.spans=e.spans,t},r}();e.ProductMap=i;var s=function(){function r(r){this.population=-1,this.centre=null,this.bbox=null,r&&(this.population=r.population,r.centre&&(this.centre=new Float32Array(r.centre)),r.bbox&&(this.bbox=new Float32Array(r.bbox)))}return r.clone=function(e){var t=new r;return t.population=e.population,e.centre&&(t.centre=new Float32Array(e.centre)),e.bbox&&(t.bbox=new Float32Array(e.bbox)),t},r.prototype.merge=function(e){if(-1===this.population&&null===this.centre&&null===this.bbox)return new r(e);var t=new r;if(t.population=this.population+e.population,this.bbox&&e.bbox){var I=Math.min(this.bbox[0],e.bbox[0]),E=Math.min(this.bbox[1],e.bbox[1]),C=Math.min(this.bbox[2],e.bbox[2]),n=Math.max(this.bbox[0]+this.bbox[3],e.bbox[0]+e.bbox[3]),a=Math.max(this.bbox[1]+this.bbox[4],e.bbox[1]+e.bbox[4]),o=Math.max(this.bbox[2]+this.bbox[5],e.bbox[2]+e.bbox[5]),i=n-I,s=a-E,T=o-C,F=(I+n)/2,A=(E+a)/2,R=(C+o)/2;t.bbox=new Float32Array([I,E,C,i,s,T]),t.centre=new Float32Array([F,A,R])}else this.bbox?(t.bbox=new Float32Array(this.bbox),t.centre=new Float32Array(this.centre)):(t.bbox=new Float32Array(e.bbox),t.centre=new Float32Array(e.centre));return t},r}();e.Region=s;var T=function(){function r(){this._internal={}}return r.prototype.Add=function(r){this._internal[r.id]=r},r.prototype.GetStyle=function(r){var e=this._internal[r];return e||null},r}()},function(r,e,t){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var I=t(5),E=t(0);if(self&&self instanceof DedicatedWorkerGlobalScope){var C=self;C.onmessage=function(r){var e=r.data.model,t=r.data.headers,n=new I.ModelGeometry;n.onerror=function(r){var e={type:E.MessageType.FAILED,message:r,percent:0};C.postMessage(e),console.error(r),C.close()},n.onloaded=function(){try{var r={},e=[];for(var t in n)if(n.hasOwnProperty(t)){var I=n[t];\"function\"==typeof I||t.startsWith(\"_\")||(r[t]=I,ArrayBuffer.isView(I)&&e.push(I.buffer))}var a={type:E.MessageType.COMPLETED,message:\"Completed\",percent:100,result:r};C.postMessage(a,e),C.close()}catch(r){a={type:E.MessageType.FAILED,message:r,percent:0};C.postMessage(a),console.error(r),C.close()}},n.load(e,t,function(r){C.postMessage(r)})}}}]));"